<div class="spinner" *ngIf="showSpinner">
    <div class="fa-3x">
        <i class="fa fa-spinner fa-spin"></i>
    </div>
</div>
<div>
    <mat-card>
        <div class="row" style="display: flex;">
            <div class="col-lg-12">
                <mat-accordion class="example-headers-align" multi>
                    <mat-expansion-panel [expanded]="true">
                        <mat-expansion-panel-header #panelSearch class="mat-expansion-panel-header">
                            <mat-panel-title>
                                <div class="row" style="width: 100%;">
                                    <div class="col-lg-4">
                                        <span class="mat-panel-title-span">Visit Details
                                        </span>
                                    </div>
                                    <div class="col-lg-8" style="text-align: right;">
                                        <button class="mt-1 cursor" mat-button style="color: #bd3640;"
                                            (click)="panelSearch._toggle(); saveVisitorDetails()">
                                            <mat-icon class="mr-10">save</mat-icon>
                                            <span class="mt-20">Save</span>
                                        </button>
                                    </div>
                                </div>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div class="row column-search mt-20">
                            <div class="col-lg-4">
                                <mat-form-field class="full-width">
                                    <mat-label for="search">Director</mat-label>
                                    <input readonly disabled="true" autocomplete="off" matInput>
                                </mat-form-field>
                            </div>
                            <div class="col-lg-4 ">
                                <mat-form-field class="full-width">
                                    <mat-label for="search">Sub Recipient</mat-label>
                                    <input readonly disabled="true" autocomplete="off" matInput>
                                </mat-form-field>
                            </div>
                            <div class="col-lg-4 ">
                                <mat-form-field class="full-width">
                                    <mat-label for="search">Review Year</mat-label>
                                    <input readonly disabled="true" autocomplete="off" matInput>
                                </mat-form-field>
                            </div>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
            <div class="col-lg-12 mt-10">
                <mat-accordion class="example-headers-align" multi>
                    <mat-expansion-panel [expanded]="false">
                        <mat-expansion-panel-header #panelSearch class="mat-expansion-panel-header">
                            <mat-panel-title>
                                <div class="row" style="width: 100%;">
                                    <div class="col-lg-4">
                                        <span class="mat-panel-title-span">Schedule Contacts
                                        </span>
                                    </div>
                                </div>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div class="row column-search mt-20">

                        </div>
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
            <div class="col-lg-12 mt-10">
                <mat-accordion class="example-headers-align" multi>
                    <mat-expansion-panel [expanded]="true">
                        <mat-expansion-panel-header #panelSearch class="mat-expansion-panel-header">
                            <mat-panel-title>
                                <div class="row" style="width: 100%;">
                                    <div class="col-lg-4">
                                        <span class="mat-panel-title-span">Schedule Details
                                        </span>
                                    </div>
                                </div>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div class="row column-search mt-20">
                            <div class="col-lg-4">
                                <mat-form-field class="full-width">
                                    <mat-label for="search">Date of Visit</mat-label>
                                    <input type="date" autocomplete="off" matInput>
                                </mat-form-field>
                                <div class="d-flex">
                                    <div class="col-8">
                                        <mat-form-field class="mt-1">
                                            <mat-label for="search">Reason For Delete</mat-label>
                                            <mat-select>
                                                <mat-option style="color: rgb(9, 2, 2);"
                                                    *ngFor="let data of reasonForDeleteList" [value]="data.id">
                                                    {{data.itemName}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-4 mt-10 text-end">
                                        <button class="cursor button-red mr-10" mat-raised-button>Delete Visit</button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4 ">
                                <mat-form-field class="full-width">
                                    <mat-label for="search">Contact Information(External)</mat-label>
                                    <textarea autocomplete="off" matInput rows="5"></textarea>
                                </mat-form-field>
                            </div>
                            <div class="col-lg-4 ">
                                <mat-form-field class="full-width">
                                    <mat-label for="search">Additional NDE Staff</mat-label>
                                    <textarea autocomplete="off" matInput rows="5"></textarea>
                                </mat-form-field>
                            </div>
                            <div class="col-lg-4">
                                <div class="d-flex">
                                    <div class="col-8">
                                        <mat-form-field class="mt-1">
                                            <mat-label for="search">Complete(Change status To)</mat-label>
                                            <mat-select>
                                                <mat-option style="color: rgb(9, 2, 2);"
                                                    *ngFor="let data of satusList" [value]="data.id">
                                                    {{data.itemName}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-4 mt-10 text-end">
                                        <button class="cursor button-red mr-10" mat-raised-button>Go</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
            <div class="col-lg-12 mt-10">
                <mat-accordion class="example-headers-align" multi>
                    <mat-expansion-panel [expanded]="true">
                        <mat-expansion-panel-header #panelSearch class="mat-expansion-panel-header">
                            <mat-panel-title>
                                <div class="row" style="width: 100%;">
                                    <div class="col-lg-4">
                                        <span class="mat-panel-title-span">Review Team
                                        </span>
                                    </div>
                                </div>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div class="row column-search mt-20">
                            <table mat-table [dataSource]="reviewTeamList" class="tbl-width">
                                <!-- Position Column -->
                                <ng-container matColumnDef="contact_name">
                                    <th mat-header-cell *matHeaderCellDef>Name</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span title="{{element.contact_name}}"
                                            [innerHTML]="element.contact_name"></span>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="prog_desc">
                                    <th mat-header-cell *matHeaderCellDef>Code</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span title="{{element.prog_desc}}" [innerHTML]="element.prog_desc"></span>
                                    </td>
                                </ng-container>
                                <tr mat-header-row *matHeaderRowDef="displayedReviewTeamColumns; sticky: true"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedReviewTeamColumns;"></tr>
                                <tr class="mat-row" *matNoDataRow>
                                    <td class="mat-cell" [attr.colspan]="displayedReviewTeamColumns.length">No
                                        Records Found
                                    </td>
                                </tr>
                            </table>
                            <mat-paginator #reviewTeamPaginator [pageSizeOptions]="[5, 10, 15, 20, 25]"
                                showFirstLastButtons></mat-paginator>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
            <div class="col-lg-12 mt-10">
                <mat-accordion class="example-headers-align" multi>
                    <mat-expansion-panel [expanded]="true">
                        <mat-expansion-panel-header #panelSearch class="mat-expansion-panel-header">
                            <mat-panel-title>
                                <div class="row" style="width: 100%;">
                                    <div class="col-lg-4">
                                        <span class="mat-panel-title-span">Stage History
                                        </span>
                                    </div>
                                </div>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div class="row column-search mt-20">
                            <table mat-table [dataSource]="stageHistoryList" class="tbl-width">
                                <!-- Position Column -->
                                <ng-container matColumnDef="rvw_stage">
                                    <th mat-header-cell *matHeaderCellDef>Review Stage</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span title="{{element.rvw_stage}}" [innerHTML]="element.rvw_stage"></span>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="start_dt">
                                    <th mat-header-cell *matHeaderCellDef>Stage Start</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span title="{{element.start_dt}}" [innerHTML]="element.start_dt"></span>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="end_dt">
                                    <th mat-header-cell *matHeaderCellDef>Stage End</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span title="{{element.end_dt}}" [innerHTML]="element.end_dt"></span>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="compl_by">
                                    <th mat-header-cell *matHeaderCellDef>Completed By</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span title="{{element.compl_by}}" [innerHTML]="element.compl_by"></span>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="reason">
                                    <th mat-header-cell *matHeaderCellDef>Reason</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span title="{{element.reason}}" [innerHTML]="element.reason"></span>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="view">
                                    <th mat-header-cell *matHeaderCellDef>View</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span title="{{element.view}}" [innerHTML]="element.view"></span>
                                    </td>
                                </ng-container>
                                <tr mat-header-row *matHeaderRowDef="displayedstageHistoryColumns; sticky: true"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedstageHistoryColumns;"></tr>
                                <tr class="mat-row" *matNoDataRow>
                                    <td class="mat-cell" [attr.colspan]="displayedstageHistoryColumns.length">No
                                        Records Found
                                    </td>
                                </tr>
                            </table>
                            <mat-paginator #stageHistoryPaginator [pageSizeOptions]="[5, 10, 15, 20, 25]"
                                showFirstLastButtons></mat-paginator>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
        </div>
    </mat-card>
</div>